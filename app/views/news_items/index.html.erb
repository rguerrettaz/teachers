<style>
.news_item_wrapper {
	width: 25%;
}
.news_item {
	-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;
	float: left;
	padding: 5px;
	margin: 10px;
	background-color: white;
}
/* Start: Recommended Isotope styles */

/**** Isotope Filtering ****/

.isotope-item {
  z-index: 2;
}

.isotope-hidden.isotope-item {
  pointer-events: none;
  z-index: 1;
}

/**** Isotope CSS3 transitions ****/

.isotope,
.isotope .isotope-item {
  -webkit-transition-duration: 0.8s;
     -moz-transition-duration: 0.8s;
      -ms-transition-duration: 0.8s;
       -o-transition-duration: 0.8s;
          transition-duration: 0.8s;
}

.isotope {
  -webkit-transition-property: height, width;
     -moz-transition-property: height, width;
      -ms-transition-property: height, width;
       -o-transition-property: height, width;
          transition-property: height, width;
}

.isotope .isotope-item {
  -webkit-transition-property: -webkit-transform, opacity;
     -moz-transition-property:    -moz-transform, opacity;
      -ms-transition-property:     -ms-transform, opacity;
       -o-transition-property:      -o-transform, opacity;
          transition-property:         transform, opacity;
}

/**** disabling Isotope CSS3 transitions ****/

.isotope.no-transition,
.isotope.no-transition .isotope-item,
.isotope .isotope-item.no-transition {
  -webkit-transition-duration: 0s;
     -moz-transition-duration: 0s;
      -ms-transition-duration: 0s;
       -o-transition-duration: 0s;
          transition-duration: 0s;
}

/* End: Recommended Isotope styles */



/* disable CSS transitions for containers with infinite scrolling*/
.isotope.infinite-scrolling {
  -webkit-transition: none;
     -moz-transition: none;
      -ms-transition: none;
       -o-transition: none;
          transition: none;
}

/* The Magnificent Clearfix: nicolasgallagher.com/micro-clearfix-hack/ */
.clearfix:before, .clearfix:after { content: ""; display: table; }
.clearfix:after { clear: both; }
.clearfix { zoom: 1; }
.hidden{ opacity: 0; }
</style>
<script type="text/javascript">
$(function ($) {
	var $grid = $('#news_item_grid');

	$grid.isotope({
		itemSelector: '.news_item_wrapper',
		layoutMode: 'masonry'
	});

	$grid.imagesLoaded(function () {
		$grid.isotope('reLayout');
		$('.news_item').removeClass('hidden');
	});
});
</script>
<h1>Popular Items</h1>

   <div id="news_item_grid" class='row-fluid'>
<% @news_items.each_with_index do |item, count| %>

	<div class="news_item_wrapper">
    <article class="news_item <%=item.format%> hidden">
      <%= render 'news_items', :item => item %>
    </article>
  </div>




<% end %>
  </div>
